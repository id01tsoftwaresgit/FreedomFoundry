# FreedomFoundry - AI-Powered Income Stream Builder

## Overview

FreedomFoundry is an AI-powered income-stream builder app designed to help users create, launch, and monetize small digital products or services in under 60 minutes. This repository contains the full source code for the frontend (HTML, TailwindCSS, Alpine.js) and backend (Python, FastAPI).

## Core Features

- **Venture Idea Engine:** AI-powered generation of monetizable business ideas.
- **One-Click Product Builder:** Instantly generate a logo, landing page, and social media posts.
- **Zero-Cost Architecture:** Designed to run on free-tier hosting services.
- **User-Owned AI Keys:** Users connect their own LLM API keys, ensuring privacy and zero AI costs for the platform owner.
- **Built-in Growth System:** Includes a referral program and an upsell path.

---

## Setup and Installation

### Prerequisites

- Python 3.8+ and `pip`
- Node.js and `npm`
- A free [Supabase](https://supabase.com/) account
- API keys from an AI provider like [OpenAI](https://openai.com/)

### Backend Setup (FastAPI)

1.  **Navigate to the backend directory:**
    ```bash
    cd backend
    ```
2.  **Create a virtual environment and activate it:**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
    ```
3.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```
4.  **Configure environment variables:**
    -   Copy the `.env.example` file to a new file named `.env`.
    -   Open `.env` and fill in your Supabase project URL and keys. You can find these in your Supabase project's "API Settings".
    ```
    SUPABASE_URL="YOUR_SUPABASE_URL"
    SUPABASE_KEY="YOUR_SUPABASE_ANON_KEY"
    SUPABASE_SERVICE_ROLE_KEY="YOUR_SUPABASE_SERVICE_ROLE_KEY"
    FRONTEND_URL="http://127.0.0.1:5500" # Or your frontend's address
    ```
5.  **Run the backend server:**
    ```bash
    uvicorn main:app --reload --port 8000
    ```
    The API will be available at `http://127.0.0.1:8000`.

### Frontend Setup (TailwindCSS & Alpine.js)

1.  **Navigate to the frontend directory:**
    ```bash
    cd frontend
    ```
2.  **Install dependencies:**
    ```bash
    npm install
    ```
3.  **Configure Supabase credentials for the client:**
    -   Open the file `frontend/assets/js/auth.js`.
    -   At the top of the file, replace the placeholder values for `SUPABASE_URL` and `SUPABASE_KEY` with your public Supabase credentials.
4.  **Start the TailwindCSS compiler:**
    ```bash
    npm run build:css
    ```
    This will watch for changes in your HTML and JS files and automatically generate the `output.css` file.
5.  **Serve the frontend:**
    -   The easiest way to run the frontend locally is with a simple HTTP server or an extension like VS Code's "Live Server".
    -   Open `frontend/index.html` with Live Server. It will typically be available at `http://127.0.0.1:5500`.

---

## Referral System Setup (Important)

The affiliate/referral system requires a table and a database trigger function to be set up in your Supabase project.

1.  **Navigate to the SQL Editor** in your Supabase dashboard.
2.  **Create the `referrals` table:** Run the following SQL query to create the table that will store referral relationships.

    ```sql
    CREATE TABLE public.referrals (
      id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY,
      created_at timestamp with time zone NOT NULL DEFAULT now(),
      referrer_id uuid NOT NULL,
      referred_id uuid NOT NULL,
      CONSTRAINT referrals_pkey PRIMARY KEY (id),
      CONSTRAINT referrals_referred_id_fkey FOREIGN KEY (referred_id) REFERENCES auth.users(id) ON UPDATE CASCADE ON DELETE CASCADE,
      CONSTRAINT referrals_referrer_id_fkey FOREIGN KEY (referrer_id) REFERENCES auth.users(id) ON UPDATE CASCADE ON DELETE CASCADE
    );
    -- Enable Row Level Security
    ALTER TABLE public.referrals ENABLE ROW LEVEL SECURITY;
    ```

3.  **Create the trigger function:** Run the following SQL to create the function that will be executed every time a new user signs up.

    ```sql
    CREATE OR REPLACE FUNCTION public.handle_new_user_referral()
    RETURNS TRIGGER
    LANGUAGE plpgsql
    SECURITY DEFINER SET search_path = public
    AS $$
    BEGIN
      -- Check if a referrer_id was passed in the user's metadata
      IF NEW.raw_user_meta_data ->> 'referrer_id' IS NOT NULL THEN
        -- Insert a new row into the referrals table
        INSERT INTO public.referrals (referrer_id, referred_id)
        VALUES ((NEW.raw_user_meta_data ->> 'referrer_id')::uuid, NEW.id);
      END IF;
      RETURN NEW;
    END;
    $$;
    ```

4.  **Create the trigger:** Run the following SQL to create the trigger that calls the function after each new user is created.

    ```sql
    CREATE TRIGGER on_new_user_referral
      AFTER INSERT ON auth.users
      FOR EACH ROW
      EXECUTE FUNCTION public.handle_new_user_referral();
    ```

After completing these steps, the referral system will be fully operational.

---

## Deployment

This project is designed to be deployed entirely on free-tier services.

### Frontend (Vercel)

The frontend is a static site that can be deployed to any static hosting provider. We recommend **Vercel** for its seamless Git integration and automatic builds.

For detailed instructions, see the deployment guide: `scripts/deploy_frontend.sh`

### Backend (Render)

The FastAPI backend can be deployed as a web service. We recommend **Render** for its generous free tier for Python web services.

For detailed instructions, see the deployment guide: `scripts/deploy_backend.sh`

---

## Monetization & Growth Features Management

### Liberty 101 Upsell

The in-app page for the Liberty 101 course (`frontend/app/liberty101.html`) contains a placeholder link for enrollment. You should update the `href` attribute on the main call-to-action button to point to your course's sales page or checkout link.

### Referral Payout Process

The current system automatically tracks new user signups via referral links. You can view the referral relationships in the `referrals` table in your Supabase database.

The system **does not** automatically track sales commissions or process payouts. This part of the process is currently manual. At the end of each month, you would need to:
1.  Check your sales platform (e.g., Stripe, Gumroad) for purchases made by referred users.
2.  Calculate the 20% commission.
3.  Pay out the commissions manually (e.g., via PayPal or another payment service).

Automating this process would require integrating payment provider webhooks and is a potential future enhancement.

### Stripe Connect Integration

The initial project request included Stripe Connect integration. This is a complex feature that requires significant backend infrastructure to handle account onboarding, webhook verification, and payment processing logic securely.

To deliver a functional and secure MVP, direct Stripe Connect integration has been scoped as a **future enhancement**. The current structure is ready for such an integration when you choose to proceed with it.
